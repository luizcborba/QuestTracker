<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest Tracker - Missões Diárias</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Ícones SVG
        const Trophy = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
            </svg>
        );

        const Flame = ({ className }) => (
            <svg className={className} fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2c1.2 2.8 3 5.4 5 7 2.5 2 4 5 4 8 0 4.4-3.6 8-8 8s-8-3.6-8-8c0-3 1.5-6 4-8 2-1.6 3.8-4.2 5-7z" />
            </svg>
        );

        const Star = ({ className }) => (
            <svg className={className} fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
            </svg>
        );

        const CheckCircle2 = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        );

        const Circle = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" strokeWidth={2} />
            </svg>
        );

        const QuestTracker = () => {
            const quests = [
                'Check-in',
                'Espólios',
                'Expedição',
                'Infernal',
                'Deserto Desconhecido',
                'Pedido de Caça',
                'Intel Report'
            ];

            const getStoredData = () => {
                const stored = localStorage.getItem('questData');
                if (stored) {
                    const data = JSON.parse(stored);
                    const today = new Date().toDateString();
                    
                    if (data.lastUpdate !== today) {
                        const allCompleted = data.completed.length === quests.length;
                        return {
                            completed: [],
                            streak: allCompleted ? data.streak + 1 : 0,
                            totalCompleted: data.totalCompleted || 0,
                            lastUpdate: today,
                            level: data.level || 1,
                            xp: data.xp || 0
                        };
                    }
                    return data;
                }
                return {
                    completed: [],
                    streak: 0,
                    totalCompleted: 0,
                    lastUpdate: new Date().toDateString(),
                    level: 1,
                    xp: 0
                };
            };

            const [data, setData] = useState(getStoredData);
            const [showAnimation, setShowAnimation] = useState('');

            useEffect(() => {
                localStorage.setItem('questData', JSON.stringify(data));
            }, [data]);

            useEffect(() => {
                const checkMidnight = setInterval(() => {
                    const now = new Date();
                    if (now.getHours() === 0 && now.getMinutes() === 0) {
                        const allCompleted = data.completed.length === quests.length;
                        setData(prev => ({
                            ...prev,
                            completed: [],
                            streak: allCompleted ? prev.streak + 1 : 0,
                            lastUpdate: now.toDateString()
                        }));
                    }
                }, 60000);

                return () => clearInterval(checkMidnight);
            }, [data.completed.length]);

            const toggleQuest = (quest) => {
                setData(prev => {
                    const isCompleted = prev.completed.includes(quest);
                    const newCompleted = isCompleted
                        ? prev.completed.filter(q => q !== quest)
                        : [...prev.completed, quest];
                    
                    const xpGain = isCompleted ? -15 : 15;
                    const newXp = Math.max(0, prev.xp + xpGain);
                    const newLevel = Math.floor(newXp / 100) + 1;
                    
                    if (!isCompleted) {
                        setShowAnimation(quest);
                        setTimeout(() => setShowAnimation(''), 500);
                    }

                    return {
                        ...prev,
                        completed: newCompleted,
                        totalCompleted: isCompleted ? prev.totalCompleted - 1 : prev.totalCompleted + 1,
                        xp: newXp,
                        level: newLevel
                    };
                });
            };

            const progress = (data.completed.length / quests.length) * 100;
            const xpProgress = (data.xp % 100);

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-6">
                    <div className="max-w-2xl mx-auto">
                        <div className="bg-slate-800/50 backdrop-blur-sm rounded-2xl p-6 mb-6 border border-purple-500/30">
                            <div className="flex items-center justify-between mb-4">
                                <div>
                                    <h1 className="text-3xl font-bold text-white mb-1">Quest Tracker</h1>
                                    <p className="text-purple-300">Missões Diárias</p>
                                </div>
                                <div className="text-right">
                                    <div className="flex items-center gap-2 text-orange-400 mb-2">
                                        <Flame className="w-6 h-6" />
                                        <span className="text-2xl font-bold">{data.streak}</span>
                                    </div>
                                    <p className="text-sm text-gray-400">dias de streak</p>
                                </div>
                            </div>

                            <div className="bg-slate-900/50 rounded-xl p-4 mb-4">
                                <div className="flex items-center justify-between mb-2">
                                    <div className="flex items-center gap-2">
                                        <Star className="w-5 h-5 text-yellow-400" />
                                        <span className="text-white font-semibold">Level {data.level}</span>
                                    </div>
                                    <span className="text-sm text-purple-300">{data.xp} XP</span>
                                </div>
                                <div className="w-full bg-slate-700 rounded-full h-3 overflow-hidden">
                                    <div 
                                        className="h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-500"
                                        style={{ width: `${xpProgress}%` }}
                                    />
                                </div>
                                <p className="text-xs text-gray-400 mt-1">{100 - xpProgress} XP para próximo nível</p>
                            </div>

                            <div className="flex items-center gap-3 mb-2">
                                <Trophy className="w-5 h-5 text-yellow-400" />
                                <div className="flex-1">
                                    <div className="flex justify-between text-sm mb-1">
                                        <span className="text-white">Progresso Diário</span>
                                        <span className="text-purple-300">{data.completed.length}/{quests.length}</span>
                                    </div>
                                    <div className="w-full bg-slate-700 rounded-full h-2 overflow-hidden">
                                        <div 
                                            className="h-full bg-gradient-to-r from-green-500 to-emerald-500 transition-all duration-300"
                                            style={{ width: `${progress}%` }}
                                        />
                                    </div>
                                </div>
                            </div>
                            
                            <p className="text-sm text-gray-400 mt-3">
                                Total completado: {data.totalCompleted} quests
                            </p>
                        </div>

                        <div className="space-y-3">
                            {quests.map((quest) => {
                                const isCompleted = data.completed.includes(quest);
                                const isAnimating = showAnimation === quest;
                                
                                return (
                                    <button
                                        key={quest}
                                        onClick={() => toggleQuest(quest)}
                                        className={`w-full text-left p-4 rounded-xl transition-all duration-300 transform hover:scale-[1.02] border-2 ${
                                            isCompleted
                                                ? 'bg-gradient-to-r from-emerald-900/50 to-green-900/50 border-emerald-500/50'
                                                : 'bg-slate-800/50 border-slate-700/50 hover:border-purple-500/50'
                                        } ${isAnimating ? 'scale-105' : ''}`}
                                    >
                                        <div className="flex items-center gap-4">
                                            {isCompleted ? (
                                                <CheckCircle2 className="w-6 h-6 text-emerald-400 flex-shrink-0" />
                                            ) : (
                                                <Circle className="w-6 h-6 text-gray-500 flex-shrink-0" />
                                            )}
                                            <div className="flex-1">
                                                <h3 className={`font-semibold ${
                                                    isCompleted ? 'text-emerald-300 line-through' : 'text-white'
                                                }`}>
                                                    {quest}
                                                </h3>
                                            </div>
                                            {isCompleted && (
                                                <span className="text-xs bg-emerald-500/20 text-emerald-400 px-3 py-1 rounded-full font-semibold">
                                                    +15 XP
                                                </span>
                                            )}
                                        </div>
                                    </button>
                                );
                            })}
                        </div>

                        {progress === 100 && (
                            <div className="mt-6 bg-gradient-to-r from-yellow-900/50 to-orange-900/50 border-2 border-yellow-500/50 rounded-xl p-6 text-center animate-pulse">
                                <Trophy className="w-12 h-12 text-yellow-400 mx-auto mb-2" />
                                <h3 className="text-xl font-bold text-yellow-300 mb-1">
                                    Todas as Quests Completadas!
                                </h3>
                                <p className="text-yellow-200/80">
                                    Continue seu streak voltando amanhã!
                                </p>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<QuestTracker />, document.getElementById('root'));
    </script>
</body>
</html>
