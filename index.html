<script>
        const data = {
            quests: {},
            streak: 0,
            totalXP: 0,
            level: 1,
            lastCompletedDate: null,
            theme: 'default',
            notifiedQuests: {}
        };

        // Sistema de notificação sonora
        const questSchedule = [
            { id: 'arena1', name: 'Arena 13:00', hour: 13, minute: 0 },
            { id: 'arena2', name: 'Arena 19:00', hour: 19, minute: 0 },
            { id: 'arena3', name: 'Arena 20:30', hour: 20, minute: 30 },
            { id: 'arena4', name: 'Arena 23:00', hour: 23, minute: 0 }
        ];

        function playNotificationSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const duration = 0.3;
            
            // Primeira nota
            const oscillator1 = audioContext.createOscillator();
            const gainNode1 = audioContext.createGain();
            oscillator1.connect(gainNode1);
            gainNode1.connect(audioContext.destination);
            oscillator1.frequency.value = 800;
            gainNode1.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode1.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            oscillator1.start(audioContext.currentTime);
            oscillator1.stop(audioContext.currentTime + duration);
            
            // Segunda nota (mais aguda)
            setTimeout(() => {
                const oscillator2 = audioContext.createOscillator();
                const gainNode2 = audioContext.createGain();
                oscillator2.connect(gainNode2);
                gainNode2.connect(audioContext.destination);
                oscillator2.frequency.value = 1000;
                gainNode2.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode2.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
                oscillator2.start(audioContext.currentTime);
                oscillator2.stop(audioContext.currentTime + duration);
            }, 150);
        }

        function checkQuestNotifications() {
            const now = new Date();
            const currentHour = now.getHours();
            const currentMinute = now.getMinutes();
            const today = now.toDateString();
            
            // Reseta notificações no início do dia
            if (!data.notifiedQuests[today]) {
                data.notifiedQuests = { [today]: {} };
                saveData();
            }
            
            questSchedule.forEach(quest => {
                // Calcula o horário de notificação (5 minutos antes)
                let notifyHour = quest.hour;
                let notifyMinute = quest.minute - 5;
                
                if (notifyMinute < 0) {
                    notifyMinute += 60;
                    notifyHour -= 1;
                }
                
                // Verifica se é hora de notificar
                if (currentHour === notifyHour && currentMinute === notifyMinute) {
                    const notificationKey = `${quest.id}_${today}`;
                    
                    if (!data.notifiedQuests[today][notificationKey] && !data.quests[quest.id]) {
                        playNotificationSound();
                        showAchievement(`⏰ ${quest.name} começa em 5 minutos!`);
                        data.notifiedQuests[today][notificationKey] = true;
                        saveData();
                    }
                }
            });
        }
